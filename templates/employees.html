{% include 'contentabove.html' %}
<h1>List of Employees</h1>
<a href="{{ url_for('exportEmployees') }}">Export all employees as JSON</a>
<table class="table">
    <thead>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Icon</th>
            <th># Tasks In Progress</th>
            <th># Total Tasks</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        {% for employee in employes %}
        <tr>
            <td>{{ employee.nom }}</td>
            <td>{{ employee.prenom }}</td>
            <td>{{ employee.email }}</td>
            <td><img src="static/icones/{{ employee.icone }}" alt="{{ employee.nom }}'s icon"></td>
            <td>{{ employee.tasks_in_progress }}</td>
            <td>{{ employee.total_tasks }}</td>
            <td><a href="{{ url_for('edit_employee', email=employee.email) }}"><i class="bi bi-pencil"></i>Edit</a></td>
            <td><a class="btn btn-danger btn-sm" href="{{ url_for('delete_employee', email=employee.email) }}">Delete</a></td>
            <td>
                <a class="btn btn-danger btn-sm" href="#" onclick="confirmDelete('{{ employee.email }}', '{{ url_for('delete_employee', email=employee.email) }}')">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    function confirmDelete(email, route) {
        if (confirm('Are you sure you want to delete this employee?')) {
            window.location.href = route;
        }
    }
</script>
{% include 'contentbelow.html' %}
